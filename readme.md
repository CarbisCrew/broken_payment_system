# Сломанная платежная система #

В Городе Н местные власти учередили собственную внутрегородскую универсальную платежную систему.\
Счетом этой платежной системы можно расчитаться в кафе, кинотеатре, на приеме у стоматолога, оплатить государственную пошлину или комунальные услуги.\
Программистам Компании U предложили реализовать MVP такой платежной системы операясь на следующиее описание:

*Счет* - хранилище денежных средств.\
Взаимодействовать со счетом можно следующим образом:
- Пополнить на некоторую сумму вручную.
- Списать некоторую сумму вручную.
- Оплатить покупку на некоторую сумму.

У каждого *горожанина* есть несколько счетов:
- *Наличный счет*\
  На этом счету хранятся собственные деньги горожанина. На него начисляется заработная плата, с него можно совершить оплату покупки, или вывести средства вручную.
- *Бонусный счет*\
  На этом счету хранятся бонусные баллы горожанина, которые могут начисляться с каждой покупки, в последствии с этого счета так же можно совершить оплату покупки.
  Вручную изъять средства с такого счета нельзя.
- *Счет потрат*\
  Нужен исключительно для отчетов. Содержит общую сумму реальных собственных денег горожанина, которые он потратил за всю историю пользования платежной системой Города Н.
  С такого счета нельзя оплатить покупку или списать средства вручную.

Выполнить списание со счета *горожанина* можно в одном из множества *Платежных терминалов* (кафе, кинотеатр, комунальная служба)
- *Платежный терминал* в *кафе* списывает средства с *наличного или бонусного* счета *горожанина* (на его усмотрение) в счет **оплаты** приобретенных товаров. С каждой оплаты с *наличного счета* терминал начисляет 10% от суммы на *бонусный счет* *горожанина*, а так же 100% от суммы оплаты на *счет потрат*
- *Платежный терминал* в *кинотеатре* списывает средства с *наличного или бонусного* счета *горожанина* (на его усмотрение) в счет **оплаты** оказанных услуг. С каждой оплаты с *наличного счета* терминал начисляет 15% от суммы на *бонусный счет* *горожанина*, а так же 100% от суммы оплаты на *счет потрат*
- *Платежный терминал* в *комунальной службе* списыват средства только с *наличного счета горожанина* в счет **оплаты** услуг ЖКХ, не начисляет бонусов, и начисляет 100% от суммы оплаты. Однако после этого **изымает вручную** с наличного счета *горожанина* еще 10% от суммы оплаты в качестве добровольного пожертвования на шторы для детского сада №13 в Калужской области.
- *Платежный терминал* на *работе* вручную начисляет на *наличный счет* горожанина сумму, равную количеству символов в его имени, уможенному на 100.
- *Платежный терминал* должен отправлять *горожанину* уведомление при проведении каждой транзакции.

К сожалению программисты Компании U раньше не сталкивались с разработкой платежных систем, поэтому не смогли закончить проект в срок и выполнить все описанные требования.\
Вам предлагается исправить их ошибки и дописать недостоющий функционал.